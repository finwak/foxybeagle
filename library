import java.util.Scanner;
public class Library {
	public final int SIZE;
	MediaItems[] mediaItems;
	public int numberOfItems;
	Library(){
		this.SIZE = 100;
		this.mediaItems = new MediaItems[SIZE];
		this.numberOfItems = 0;
	}
	public static void main(String[] args) {
		Library library = new Library();
		String title;
		String format;
		String loanedTo;
		String dateLoaned;
		boolean running= true;
		for(int i = 0; i<100;i++){
			library.mediaItems[i]= new MediaItems();
		}
	    Scanner in = new Scanner(System.in);
		while(running){
	    	switch(library.displayMenu()){
	    		case 1:
	    			System.out.println("What is the title?");
	    			title = in.nextLine();
	    			System.out.println("What kind of media is it?");
	    			format = in.nextLine();
	    			library.addNewItem(title,format);
	    			break;
	    		case 2:
	    			System.out.println("What is the title?");
	    			title= in.nextLine();
	    			System.out.println("What is your name?");
	    			loanedTo = in.nextLine();
	    			System.out.println("What is the date?");
	    			dateLoaned = in.nextLine();
	    			library.markItemOnLoan(title, loanedTo, dateLoaned);
	    			break;
	    		case 3:
	    			String allItems[] = library.listAllItems();
	    			for(int i=0;i<allItems.length;i++){
	    				System.out.println(allItems[i]);
	    			}
	    			break;
	    		case 4:
	    			System.out.println("What is the title?");
	    			title = in.nextLine();
	    			library.markItemReturned(title);
	    			break;
	    		case 5:
	    			running = false;
	    			break;
	    		}
	    }
	    in.close();
	}
	int displayMenu(){	
		int choice;
		Scanner input = new Scanner(System.in);
		do
		{
			System.out.println
			(
					"what would you like to do?\n"+
					"1. Add New Item\n"+
					"2. Mark a Item as loaded\n"+
					"3. List all Items\n"+
					"4. Marked Item as Returned\n"+
					"5. Quit"
			);
			choice = input.nextInt();
			//input.nextLine();
		}
		while(choice<1||choice>5);
		input.close();	
		return choice;
	}

	void addNewItem(String title, String format){
		mediaItems[numberOfItems].setTitle(title);
		mediaItems[numberOfItems].setFormat(format);
		numberOfItems++;
	}

	void markItemOnLoan(String title, String name, String date){
		for(int i = 0; i <= numberOfItems; i++){
			if (mediaItems[i].getTitle()==title){
				mediaItems[i].markOnLoan(name, date);				
				break;
			}
			else{
				System.out.println("That Title is not in our library.");
			}
		}	
	}

	String[] listAllItems(){
		String[] allItems = new String[numberOfItems];
		for(int i=0;i<numberOfItems;i++){		
			if(mediaItems[i].getOnLoan()==true){
				allItems[i]=mediaItems[i].getTitle() +"(" +mediaItems[i].getFormat()+") Loaned to " + 
							mediaItems[i].getLoanedTo() +" " +mediaItems[i].getDateLoaned();
			}else{
				allItems[i]= mediaItems[i].getTitle() +"(" +mediaItems[i].getFormat()+")";
			}
		}
		return allItems;
	}

	void markItemReturned(String title){
		
		for(int i = 0; i <= numberOfItems; i++){
			if (mediaItems[i].getTitle()==title){
				mediaItems[i].markReturned();
				break;
			}
			else{
				System.out.println("That Title is not in our library.");
			
			}
		}
	}
}
